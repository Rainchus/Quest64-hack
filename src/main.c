#include "../include/Quest64.h"
#include "../include/PR/gbi.h"

extern u32 calls;
extern s32 color;
extern Gfx* gMasterGfxPos;

//u8 itemIdsToNotRemove[] = {0xE, 0xF, 0x10, 0x11, 0x12, 0x13, 0x1E};

u8 BlackTextPal[] = {0xF8, 0x3E, 0x9C, 0x1B, 0x6A, 0xD5, 0x31, 0x8D, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01};
u8 RedTextPal[] = {0xF8, 0x3E, 0xBB, 0x5D, 0xAA, 0x57, 0x8A, 0x13, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01};
u8 GrayTextPal[] = {0xF8, 0x3E, 0x94, 0xA5, 0x7B, 0xDF, 0x63, 0x19, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01};
u8 GreenTextPal[] = {0xF8, 0x3E, 0x04, 0x81, 0x03, 0xC1, 0x03, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01};
u8 LightBlueTextPal[] = {0xF8, 0x3E, 0x00, 0xFF, 0xFF, 0x00, 0x4F, 0xFF, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01};

u8* ExtendedColorPalettes[] = {
    BlackTextPal,
    RedTextPal,
    GrayTextPal,
    GreenTextPal,
    LightBlueTextPal,
};

void SetTextColorIfRngFrozen(void) {
    if (gCurrentMap == 0x0000000F && gNextSubmap == 0x00000005) {
        rng_seed = 0x09951388;
        calls = 72;
        color = LIGHT_BLUE;
    } else {
        color = BLACK;
    }
}

void mainCFunction(void) { //ran every frame
    SetTextColorIfRngFrozen();
}
